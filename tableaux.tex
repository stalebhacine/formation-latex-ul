\chapter{Boîtes, tableaux et figures}
\label{chap:tableaux}

Les tableaux et graphiques ne sont pas les éléments de texte les plus
simples et rapides à créer avec {\LaTeX}. Les traitements de texte
brillent, ici, avec leurs interfaces graphiques permettant de composer
un tableau ou un graphique simple pièce par pièce avec la souris.

En revanche, pour ce type de contenu comme pour tout autre, {\LaTeX}
fait exactement ce qu'on lui demande. À ce chapitre, les traitements
de texte ne brillent plus! Si vous avez déjà eu de la difficulté à
contrôler les bordures d'un tableau, la hauteur des lignes ou la
largeur des colonnes, vous comprenez ce à quoi nous faisons référence.

Avant de discuter de la création ou de l'insertion de tableaux,
graphiques et images, il convient ...


\section{Boîtes}
\label{sec:tableaux:boites}

Il arrive que l'on doive traiter de manière spéciale une aire
rectangulaire de texte; pour l'encadrer, la mettre en surbrillance ou
la mettre en exergue, par exemple.

Avec les traitements de texte, on aura souvent recours aux tableaux à
de telles fins. Or, les tableaux devraient être réservés pour disposer
de l'information sous forme de grille. Pour disposer et mettre en
forme du tout autre type contenu se présentant sous forme
rectangulaire, {\LaTeX} offre la solution plus générale des «boîtes».

Il existe trois sortes de boîtes en {\LaTeX}: les boîtes horizontales
dont le contenu est disposé exclusivement côte à côte; les boîtes
verticales qui peu\-ent contenir plusieurs lignes de contenu; les
boîtes de réglure pour former des lignes pleines de largeur et de
hauteur quelconques.

Il n'est pas inutile de savoir, au passage, que {\TeX} ne manipule que
cela, des boîtes. Pour {\TeX}, chaque caractère, chaque lettre n'est
qu'un rectangle d'une certaine largeur qui s'élève au-dessus de la
ligne de base (les lignes d'une feuille lignée) et qui, parfois, se
prolonge sous la ligne de base (pensons aux lettres \emph{p}, \emph{y}
ou \emph{Q}). Les commandes et environnements présentés ci-dessous
permettent simplement de créer d'autres boîtes dont le contrôle des
dimensions et du contenu est laissé à l'usager.

Une fois créée, une boîte ne peut être scindée en parties, notamment
entre les lignes ou entre les pages.


\subsection{Boîtes horizontales}
\label{sec:tableaux:boites:lrbox}

Le plus simple concept de boîte dans {\LaTeX} est celui de boîte
«horizontale», c'est-à-dire dont le contenu est disposé latéralement
de gauche à droite\footnote{%
  D'où l'appellation \emph{LR (left-right) box} en anglais.}. %
Le contenu est normalement du texte, mais conceptuellement ce pourrait
être n'importe quoi, y compris d'autres boîtes.

Les commandes de base pour créer des boîtes horizontales sont:
\begin{lstlisting}
\mbox`\marg{texte}'
\fbox`\marg{texte}'
\end{lstlisting}
Elles produisent une boîte de la largeur précise de \meta{texte}. Avec
la commande \cmd{\fbox}, le texte est au surplus \fbox{encadré}. En
usage courant, la commande \cmd{\mbox} sert principalement à deux
choses:
\begin{enumerate}
\item réunir en un bloc du texte que l'on ne veut pas voir scindé
  entre les lignes ou entre les pages;
\item \label{item:tableaux:mbox} créer une boîte vide avec
  \verb=\mbox{}= afin de laisser croire à {\TeX} que du contenu
  apparait à un endroit, sans toutefois qu'il n'occupe aucun espace.
  %% ça prendrait un exemple de cela dans les exercices!
\end{enumerate}

Il existe également des versions plus générales des commandes
\cmd{\mbox} et \cmd{\fbox}:
\begin{lstlisting}
\makebox`\oarg{largeur}\oarg{pos}\marg{texte}'
\framebox`\oarg{largeur}\oarg{pos}\marg{texte}'
\end{lstlisting}
Les arguments optionnels \meta{largeur} et \meta{pos} déterminent
respectivement la largeur de la boîte et la position du texte
dans la boîte. Les valeurs possibles de \meta{pos} sont: \code{l} pour
du texte aligné à gauche, \code{r} pour du texte aligné à droite et
\code{c} (la valeur par défaut) pour du texte centré. Ainsi, la commande
\begin{lstlisting}
\framebox[3.5cm][l]{aligné à gauche}
\end{lstlisting}
produit \framebox[3.5cm][l]{aligné à gauche}, alors que
\begin{lstlisting}
\makebox[3.5cm]{centré}
\end{lstlisting}
produit \makebox[3.5cm]{centré}.

\subsection{Boîtes verticales}
\label{sec:tableaux:boites:parbox}

Les boîtes verticales se distinguent des boîtes horizontales par le
fait qu'elles peuvent contenir plusieurs lignes de contenu empilées
les unes au-dessus des autres. Lorsque le contenu en question est du
texte, on obtient des paragraphes\footnote{%
  D'où l'appellation, cette fois, de \emph{paragraph boxes} en anglais
  ou \emph{parboxes} dans le jargon {\LaTeX}.}. %

La commande de base pour créer une boîte verticale est:
\begin{lstlisting}
\parbox`\oarg{pos}\marg{largeur}\marg{texte}'
\end{lstlisting}
Ici, l'argument optionnel \meta{pos} permet d'ajuster l'alignement
vertical de la boîte avec la ligne de base: \code{b} ou \code{t} selon
que l'on souhaite aligner, respectivement, le bas ou le haut de la
boîte avec la ligne de base. Par défaut, la boîte est centrée avec la
ligne de base. Cet argument n'a aucun effet si la boîte est le seul
élément de contenu du paragraphe.

On remarquera que l'argument \meta{largeur} est ici obligatoire.
Autrement dit, on doit nécessairement définir la largeur des boîtes
verticales, un peu comme il faut bien définir la largeur de la page
pour le texte normal.

Les boîtes créées avec \cmd{\parbox} ne peuvent contenir de structures
«complexes» comme des listes ou des tableaux. Parce que plus général,
l'outil véritablement utile pour la création de boîtes verticales est
l'environnement \Ie{minipage}. Cet environnement peut contenir à peu
n'importe quel type de contenu. Comme son nom l'indique, c'est ni plus
ni moins qu'une page miniature à l'intérieur de la page standard.

La syntaxe de l'environnement \Ie{minipage} est la suivante:
\begin{lstlisting}
\begin{minipage}`\oarg{pos}\marg{largeur}'
  `\meta{texte}'
\end{minipage}
\end{lstlisting}

L'environnement \Ie{minipage} est ouvent utilisé pour disposer des
éléments de contenu de manière spécifique sur la page, notamment des
tableaux ou des figures côte-à-côte ou en grille.
%%% Exemple plus loin! %%%

\begin{exemple}
  Le code ci-dessous
\begin{lstlisting}
\begin{minipage}[b]{0.3\textwidth}
  La ligne inférieure de cette \emph{minipage} [...]
\end{minipage}
\hfill
\parbox{0.3\textwidth}{le centre de cette boîte [...] }
\hfill
\begin{minipage}[t]{0.3\textwidth}
  la ligne supérieure de cette \emph{minipage}. [...]
\end{minipage}
\end{lstlisting}
  produit: \\[0.5\baselineskip]
  \begin{minipage}{\textwidth}
    \makebox[0pt][l]{\color{lightgray}\rule{\textwidth}{0.7pt}}\relax
    \fbox{\begin{minipage}[b]{0.3\textwidth} La ligne inférieure de
        cette \emph{minipage} est alignée avec
      \end{minipage}} \hfill \fbox{\parbox{0.3\textwidth}{le centre de
        cette boîte verticale, qui est à son tour alignée avec}}
    \hfill \fbox{\begin{minipage}[t]{0.3\textwidth} la ligne
        supérieure de cette \emph{minipage}. Le filet horizontal grisé
        représente la ligne de base du paragraphe contenant les trois
        boîtes.
      \end{minipage}}
  \end{minipage}
  \qed
\end{exemple}

La commande \cmd{\hfill} utilisée entre les boîtes dans l'exemple
indique à {\LaTeX} d'insérer de l'espace blanc entre les éléments de
contenu de manière à remplir entièrement la ligne de texte. C'est une
commande très utile pour disposer automatiquement des éléments à
intervalles égaux sur la largeur du bloc de texte. Ainsi,
\begin{lstlisting}
gauche  \hfill droite
\end{lstlisting}
produit \\[0.5\baselineskip]
\framebox[\textwidth]{gauche \hfill droite} \\[0.5\baselineskip]
alors que
\begin{lstlisting}
gauche \hfill centre \hfill droite.
\end{lstlisting}
produit \\[0.5\baselineskip]
\framebox[\textwidth]{gauche \hfill centre \hfill droite.}

\begin{rem}
  Dans les exemples de boîtes ci-dessus, nous avons encadré celles-ci
  afin de les mettre en évidence. Le code pour créer les cadres
  n'apparait pas dans les extraits de code source.
\end{rem}


%%% Exercices: faire le contenu de 4.7.4 de Kopka et Daly (disposition
%%% verticale des boîtes)

\subsection{Boîtes de réglure}
\label{sec:tableaux:boites:rulebox}

En imprimerie, une réglure est une ligne droite continue ou
pointillée. Une ligne n'étant jamais rien d'autre qu'un rectangle
plein, si mince fut-il, la réglure est le troisième type de
boîte\footnote{%
  \emph{Rule box}, en anglais} %
dans {\LaTeX}.

La commande
\begin{lstlisting}
\rule`\oarg{déplacement}\marg{largeur}\marg{hauteur}'
\end{lstlisting}
crée une réglure de dimensions \meta{largeur} $\times$ \meta{hauteur}.
Par défaut, la réglure s'appuie sur la ligne de base. Le résultat de
\begin{lstlisting}
\rule{2cm}{6pt}
\end{lstlisting}
est donc une ligne pleine de $2$~cm de long et $6$~points d'épais:
\rule{2cm}{6pt}.

L'argument optionnel \meta{déplacement} permet de déplacer
verticalement la réglure au-dessus ou au-dessous de la ligne de base
selon que \meta{déplacement} est positif ou négatif. Avec les deux
commandes
\begin{lstlisting}
\rule[3pt]{2cm}{6pt}
\rule[-3pt]{2cm}{6pt}
\end{lstlisting}
on crée respectivement les réglures \rule[3pt]{2cm}{6pt} et
\rule[-3pt]{2cm}{6pt}.

Un usage intéressant de la réglure consiste à faire croire à {\TeX}
qu'une ligne est plus haute qu'il n'y parait en insérant dans celle-ci
une réglure de largeur nulle. Par exemple, la distance entre
\rule[-8pt]{0mm}{24pt}\relax la présente ligne et les autres du paragraphe est
plus grande que la normale parce que nous y avons inséré une réglure
invisible avec
\begin{lstlisting}
\rule[-8pt]{0mm}{24pt}
\end{lstlisting}
Ce truc est particulièrement utile pour augmenter la hauteur des
lignes dans un tableau; voir la \autoref{sec:tableaux:tableaux}.



\section{De la conception de beaux tableaux}
\label{sec:tableaux:booktabs}

On utilise les tableaux pour disposer de l'information sous forme de
grille. Ainsi, le premier réflexe pour les mettre en forme
consiste-t-il souvent à mettre en évidence cette grille par le biais
de filets\footnote{%
  Communément appelés «lignes» dans le langage courant ou «bordures»
  dans les logiciels de traitement de texte. Dans la documentation en
  anglais, on parle de \emph{rules}.} %
horizontaux et verticaux.

C'est une mauvaise idée, une pratique à éviter. Vraiment!

Comparer les deux tableaux ci-dessous. Le premier est mis en forme
selon une approche classique supportée depuis toujours par {\LaTeX}:
filets doubles en entête et en pied de tableau, filets simples entre
chaque ligne et entre les colonnes.

\begin{center}
  \begin{tabular}{|>{$}c<{$}|>{$}r<{$}|>{$}r<{$}|>{$}r<{$}|>{$}c<{$}|>{$}c<{$}|}
    \hline\hline
    i &
    \multicolumn{1}{c|}{$v$} &
    \multicolumn{1}{c|}{$b_i$} &
    \lfloor v/b_i \rfloor & v \bmod b_i & x_i \\
    \hline
    0 & \nombre{91492} &  60 & \nombre{1524} & 52 & 52 \\
    1 &  \nombre{1524} &  60 &           25  & 24 & 24 \\
    2 &            25  &  24 &            1  &  1 &  1 \\
    3 &             1  & 365 &            0  &  1 &  1 \\
    \hline\hline
  \end{tabular}
\end{center}

Le second tableau tire profit des fonctionnalités du paquetage
\pkg{booktabs} et des recommandations de son auteur: les filets
horizontaux sont d'épaisseur différente selon qu'ils sont situés dans
l'entête et dans le pied du tableau ou entre les lignes, l'espace
autour des filets horizontaux est plus grand et, surtout, il n'y a pas
de filets verticaux.

\begin{center}
  \begin{tabular}{>{$}c<{$}>{$}r<{$}>{$}r<{$}>{$}r<{$}>{$}c<{$}>{$}c<{$}}
    \toprule
    i &
    \multicolumn{1}{c}{$v$} &
    \multicolumn{1}{c}{$b_i$} &
    \lfloor v/b_i \rfloor & v \bmod b_i & x_i \\
    \midrule
    0 & \nombre{91492} &  60 & \nombre{1524} & 52 & 52 \\
    1 &  \nombre{1524} &  60 &           25  & 24 & 24 \\
    2 &            25  &  24 &            1  &  1 &  1 \\
    3 &             1  & 365 &            0  &  1 &  1 \\
    \bottomrule
  \end{tabular}
\end{center}

La seconde version n'est-elle pas la plus aérée et la plus facile à
consulter? Vous constatez que, contrairement à ce que l'on pourrait
penser, les filets verticaux ne sont pas du tout requis pour bien
délimiter les colonnes?

Tel que mentionné ci-dessus, le paquetage \pkg{booktabs} ajoute des
fonctionnalités à {\LaTeX} pour améliorer la qualité typographique des
tableaux. Dans la documentation du paquetage, son auteur énonce
quelques règles à suivre pour la mise en forme des tableaux:
\begin{enumerate}
\item ne \emph{jamais} utiliser de filets verticaux. Si l'information du côté
  gauche du tableau semble si différente de celle du côté droit
  qu'un filet apparait vertical nécessaire, scinder simplement
  l'information dans deux tableaux;
\item ne jamais utiliser de filets doubles;
\item placer les unités dans le titre de la colonne plutôt qu'après
  chaque valeur dans le corps du tableau;
\item toujours inscrire un chiffre du côté gauche du séparateur
  décimal: $0,1$ et non $,1$ (pratique plus répandue en anglais, où le
  séparateur décimal est le point);
\item ne pas utiliser un symbole pour représenter une valeur
  répétée (comme $''$ ou ---). Laisser un blanc ou répéter la
  valeur s'il subsiste une ambiguïté.
\end{enumerate}

Nous recommandons évidemment de suivre ces règles et c'est pourquoi la
présente documentation ainsi que les fichiers d'exemples font usage
des commandes de \pkg{booktabs}.

Les fonctionnalités de \pkg{booktabs} sont intégrées à la classe
\class{memoir} et par conséquent à \class{ulthese}. Il n'est donc pas
nécessaire de charger le paquetage avec ces deux classes.



\section{Tableaux}
\label{sec:tableaux:tableaux}

Peu importe l'outil utilisé, la création d'un tableau requiert de
préciser à l'ordinateur le nombre de colonnes que contiendra le
tableau, l'entête du tableau si nécessaire et le contenu des
différentes cellules. Cette dernière étape nécessite à son tour une
convention pour pour identifier les passages à la colonne suivante
ainsi que le passage à la ligne suivante.

On crée des tableaux dans {\LaTeX} principalement avec les
environnements \Ie{tabular}, \Ie{tabular*} et \Ie{tabularx} (ce
dernier fourni par le paquetage \pkg{tabularx} ou par la classe
\class{memoir}). La syntaxe de ces environnements est:
\begin{lstlisting}
\begin{tabular}`\marg{format}'           `\textit{lignes}' \end{tabular}
\begin{tabular*}`\marg{largeur}\marg{format}' `\textit{lignes}' \end{tabular*}
\begin{tabularx}`\marg{largeur}\marg{format}' `\textit{lignes}' \end{tabularx}
\end{lstlisting}
La signification des arguments\footnote{%
  Nous avons omis un argument optionnel à peu près jamais utilisé
  servant à spécifier l'alignement vertical du tableau par rapport à
  la ligne de base externe.} %
est la suivante. Nous ne traitons ici que les options les plus souvent
employées. Pour une liste plus exhaustive, consulter la documentation
de la classe \class{memoir} (chapitre 11) ou \cite{wikilivres:latex}
(section \href{http://fr.wikibooks.org/wiki/LaTeX/Tableaux}{Tableaux}).

\begin{list}{}{%
    \setlength{\labelsep}{1.5ex}
    \settowidth{\labelwidth}{\meta{largeur}}
    \setlength{\leftmargin}{\labelwidth}
    \addtolength{\leftmargin}{\labelsep}
    \setlength{\parsep}{0.5ex plus0.2ex minus0.2ex}
    \setlength{\itemsep}{0.3ex}
    \renewcommand{\makelabel}[1]{\meta{#1}\hfill}}
%
\item[largeur] Largeur hors tout d'un tableau avec les
  environnements \Ie{tabular*} et \Ie{tabularx}. Autrement,
  avec l'environnement \Ie{tabular}, la largeur d'un tableau est
  déterminée automatiquement pour contenir tout le contenu du tableau,
  quitte à dépasser dans la marge de droite.

  La largeur du tableau est généralement exprimée en fraction de la
  largeur du bloc de texte. Celle-ci est accessible avec la commande
  \verb=\textwidth=. Par exemple, les déclarations suivantes
  définissent respectivement des tableaux occupant toute la largeur
  d'une page et 80~\% de la largeur de la page:
\begin{lstlisting}
\begin{tabular*}{\textwidth}`\marg{format}'
\end{lstlisting}
\begin{lstlisting}
\begin{tabularx}{0.8\textwidth}`\marg{format}'
\end{lstlisting}
  L'environnement \Ie{tabular*} joue sur l'espace entre les colonnes
  pour parvenir à la largeur prescrite, alors que \Ie{tabularx} joue
  sur la largeur des colonnes (voir ci-dessous).
  %
\item[format] Le format des colonnes et, par le fait même, le nombre
  de colonnes puisque l'argument doit compter un symbole pour chaque
  colonne du tableau. Les principaux symboles de mise en forme des
  colonnes sont:
  \begin{description}
  \item[\normalfont\code{l}] contenu de la colonne aligné à gauche;
  \item[\normalfont\code{r}] contenu de la colonne aligné à droite;
  \item[\normalfont\code{c}] contenu de la colonne centré;
  \item[\normalfont\code{p\{}\textit{lgr}\code{\}}] contenu de la colonne traité comme un
    paragraphe de texte de largeur \textit{lgr};
  \item[\normalfont\code{X}] [environnement \Ie{tabularx} seulement]
    colonne dont la largeur peut être ajustée pour obtenir un tableau
    de la largeur prescrite; identique à \code{p} par ailleurs.
  \end{description}
  Par exemple, pour définir un tableau à trois colonnes dont le
  contenu de la première est aligné à gauche, celui de la seconde à
  droite et celui de la troisième en texte libre dans une cellule de
  5~cm de largeur, on utiliserait:
\begin{lstlisting}
\begin{tabular}{lrp{5cm}}
\end{lstlisting}
  Avec la déclaration suivante, la largeur de la troisième colonne
  sera automatiquement adaptée pour que le tableau occupe toute la
  largeur de la page:
\begin{lstlisting}
\begin{tabularx}{\textwidth}{lrX}
\end{lstlisting}

  Les symboles \verb=|= et \verb=||= dans \textit{format} servent à
  insérer des filets verticaux simples et doubles entre les colonnes,
  mais nous avons vu à la \autoref{sec:tableaux:booktabs} que c'est
  une pratique à proscrire.
  %
\item[lignes] Le contenu des cellules du tableau. Les entrées des
  cellules sont séparées par le symbole \verb=&= et les lignes par
  \verb=\\=. Une cellule peut être vide.

  Les lignes de contenu peuvent également contenir certaines commandes
  spéciales pour contrôler la mise en forme. La commande ci-dessous
  permet de fusionner des cellules:
  \begin{description}
  \item[\normalfont\cmd{\multicolumn\marg{num}\marg{fmt}\marg{texte}}]
    fusionne les \meta{num} cellules suivantes en une seule de format
    \meta{fmt} et contenant le texte \meta{texte}. \par%
    Cette commande ne peut apparaître qu'au début d'une ligne ou après
    un symbole de changement de colonne \verb=&=. \par%
    La commande est souvent utilisée avec $\text{\meta{num}} = 1$ pour
    changer le format d'une cellule, par exemple pour centrer le
    titre d'une colonne autrement alignée à gauche ou à droite.
  \end{description}

  Les commandes suivantes\footnote{%
    Ce sont les commandes de \pkg{booktabs} et \class{memoir}
auxquelles nous faisions référence à la \autoref{sec:tableaux:booktabs}.} %
  servent à insérer des filets horizontaux dans un tableau:
  \begin{description}
  \item[\normalfont\cmd{\toprule}] insère un filet horizontal épais
    suivi d'un espace vertical au début d'un tableau;
  \item[\normalfont\cmd{\midrule}] insère un filet horizontal mince
    précédé et suivi d'un espace vertical entre deux lignes;
  \item[\normalfont\cmd{\cmidrule\marg{n-m}}] insère un filet
    horizontal comme \cmd{\midrule}, mais seulement de la gauche de la
    colonne \meta{n} à la droite de la colonne \meta{m};
  \item[\normalfont\cmd{\bottomrule}] insère un filet horizontal épais
    précédé d'un espace vertical à la fin d'un tableau.
  \end{description}
  Ces commandes doivent toutes obligatoirement être précédées d'une
  fin de ligne \verb=\\=, sauf évidemment \cmd{\toprule}.

  Un exemple simple de lignes de contenu serait:
\begin{lstlisting}
\toprule
Produit & Quantité & Prix unitaire (\$) & Prix (\$) \\
\midrule
Vis à bois    & 2 & 9,90 & 19,80 \\
Clous vrillés & 5 & 4,35 & 21,75 \\
\midrule
TOTAL         & 7 &      & 41,55 \\
\bottomrule
\end{lstlisting}
\end{list}

La hauteur des lignes d'un tableau est déterminée automatiquement en
fonction de contenu de celles-ci.

\begin{exemple}
  On reprend le contenu ci-dessus pour en faire un tableau d'une
  largeur ajustée automatiquement au contenu. La première colonne est
  alignée à gauche et toutes les autres à droite.
\begin{lstlisting}
\begin{tabular}{lrrr}
  \toprule
  Produit & Quantité & Prix unitaire (\$) & Prix (\$) \\
  \midrule
  Vis à bois    & 2 & 9,90 & 19,80 \\
  Clous vrillés & 5 & 4,35 & 21,75 \\
  \midrule
  TOTAL         & 7 &      & 41,55 \\
  \bottomrule
\end{tabular}
\end{lstlisting}
  \begin{center}
    \begin{tabular}{lrrr}
      \toprule
      Produit & Quantité & Prix unitaire (\$) & Prix (\$) \\
      \midrule
      Vis à bois    & 2 & 9,90 & 19,80 \\
      Clous vrillés & 5 & 4,35 & 21,75 \\
      \midrule
      TOTAL         & 7 &      & 41,55 \\
      \bottomrule
    \end{tabular}
  \end{center}

  Avec quelques modifications, le tableau occupe maintenant toute la
  largeur de la page, la largeur de la première colonne étant ajustée
  pour combler l'espace nécessaire. De plus, on modifie l'entête de la
  première colonne avec la commande \cmd{\multicolumn} afin de centrer
  le titre. Enfin, on augmente la hauteur de l'entête à l'aide d'une
  réglure invisible (\autoref{sec:tableaux:boites:rulebox}).
\begin{lstlisting}
\begin{tabularx}{\textwidth}{Xrrr}
  \toprule
  \multicolumn{1}{c}{Produit} &
    \rule[-8pt]{0mm}{24pt} Quantité &
    Prix unitaire (\$) & Prix (\$) \\
  \midrule
  Vis à bois    & 2 & 9,90 & 19,80 \\
  Clous vrillés & 5 & 4,35 & 21,75 \\
  \midrule
  TOTAL         & 7 &      & 41,55 \\
  \bottomrule
\end{tabularx}
\end{lstlisting}
  \begin{center}
    \begin{tabularx}{\textwidth}{Xrrr}
      \toprule
      \multicolumn{1}{c}{Produit} &
      \rule[-8pt]{0mm}{24pt} Quantité & Prix unitaire (\$) & Prix (\$) \\
      \midrule
      Vis à bois    & 2 & 9,90 & 19,80 \\
      Clous vrillés & 5 & 4,35 & 21,75 \\
      \midrule
      TOTAL         & 7 &      & 41,55 \\
      \bottomrule
    \end{tabularx}
  \end{center}
  \qed
\end{exemple}



\section{Figures et graphiques}
\label{sec:tableaux:figures}

Il est possible de tracer des figures simples directement avec {\LaTeX}. Par «simple» on entend: des figures se
limitant  pour l'essentiel à du texte, des lignes, des flèches, des
ronds et des ovales. C'est parfois amplement suffisant et, en
définitive, assez pratique puisque le code source d'une figure se
trouve alors dans le même format que le reste du document.

Pour la création de figures et de graphiques plus complexes, on aura généralement
recours à des logiciels spécialisés externes. {\LaTeX} est ensuite en
mesure d'importer des graphiques dans les formats standards tels que PDF, JPEG
ou PNG, voire même d'insérer dans un document une ou plusieurs pages
d'un document PDF.

Couvrir les détails de la création et de la manipulation d'images
dépasse largement la portée du présent document. Le reste de cette
section ne présente que les principales fonctionnalités. Le lecteur
intéressé d'en savoir plus pourra se référer aux sources de documentation habituelles figurant à la
bibliographie.


\subsection{Figures {\LaTeX}}
\label{sec:tableaux:figures:picture}

L'environnement \Ie{picture} permet de tracer des figures simples dans
{\LaTeX} comme des diagrammes à base de texte, des flux logiques ou
des organigrammes. Quelques logiciels spécialisés de création de
graphiques sont en mesure d'exporter leurs graphiques dans le format
de \Ie{picture}.

Une fois conçues, les figures réalisées avec \Ie{picture} sont
simples à modifier; nul besoin de recourir à un logiciel externe pour
le moindre petit changement. Autre avantage: la police de caractère du texte
de la figure sera le même que celle du document.

Pour tracer une figure avec l'environnement \Ie{picture}, on crée
d'abord une grille (invisible) d'une dimension quelconque dans l'unité
de mensure de son choix (autrement dit: les lignes de la grille
peuvent être distantes aussi bien de \code{1pt} que de \code{1cm}).
Ensuite, on dispose des éléments sur la grille en donnant les
coordonnées du point de départ et, le cas échéant, les dimensions de
l'élément, la distance à parcourir ou quelqu'autre information pour
compléter l'élément. C'est souvent plus simple d'esquisser d'abord un modèle au
crayon sur du papier quadrillé.

Le code commenté et la figure correspondante ci-dessous  illustrent
les idées principales. L'annexe~D de la documentation de la classe
\class{memoir} fournit une bonne introduction à \Ie{picture}.

\begingroup
  \small
\begin{lstlisting}
\setlength{\unitlength}{7mm}  % unité de mesure
\begin{picture}(15,9)         % grille 15 x 9
  %%% On trace d'abord toutes les boîtes

  %% Rectangle "L'environnement picture"
  \put(0,7){%                 % point de départ (0, 7)
    \framebox(5,1.5){%        % rectangle 5 x 1,5 cadre plein
      \begin{minipage}{35mm}  % contenu de la boîte
        \centering L'environnement \\ \texttt{picture}
      \end{minipage}}}

  %% Cercles "convient" et "bien"
  \put(1,4.5){\circle{2}}                     % cercle de diamètre 2
  \put(1,4.5){\makebox(0,0){\small convient}} % texte centré
  \put(4,3){\circle{2}}                       % autre cercle
  \put(4,3){\makebox(0,0){\small bien}}       % texte

  %% Texte "pour les diagrammes"
  \put(8.5,5.7){pour les diagrammes}

  %% Rectangle pointillé "et autres figures simples."
  \thicklines                     % lignes grasses
  \put(8,1){\dashbox{0.2}(7,1.5){ % rectangle 7 x 1,5 cadre pointillé
      et autres figures simples.}}

  %%% On trace ensuite les lignes entre les boîtes

  %% De "L'environnement picture" à "convient"
  \thinlines                    % retour aux lignes minces
  \put(1,7){\vector(0,-1){1.5}} % flèche vers le bas de longueur 1,5
                                % [couple (0,-1) donne la pente]

  %% De "pour les diagrammes" à "et autres figures simples."
  \put(14,5.75){\circle*{0.1}}  % petit cercle plein
  \put(14,5.75){\vector(-1,-1){3.25}} % flèche vers sud-ouest
                                      % [3.25 est déplacement hor.]

  %% Entre les deux cercles; requiert deux segments
  \thicklines                   % lignes grasses
  \put(1,3.5){\line(0,-1){0.5}} % courte ligne sans flèche
  \put(1,3){\vector(1,0){2}}    % suite de flèche entre les cercles

  %% Entre "bien" et "pour les diagrammes"; requiert deux courbes
  \qbezier(4,2)(5.5,-0.5)(7,4.25)  % deux courbes de Bézier bout à
  \qbezier(7,4.25)(8.5,9)(10,6.5)  % bout pour produire courbe en S
  \put(10,6.5){\vector(2,-3){0.1}} % pointe de flèche seule
\end{picture}
\end{lstlisting}
\endgroup

\setlength{\unitlength}{7mm}
\begin{center}
  \begin{picture}(15,9)
    \linethickness{0.3pt} \color{lightgray}
    \multiput(0,0)(1,0){16}{\line(0,1){9}}
    \multiput(0,0)(0,1){10}{\line(1,0){15}}
    \color{black}

    %% boîtes
    \put(0,7){%
      \framebox(5,1.5){
        \begin{minipage}{35mm}
          \centering L'environnement \\ \texttt{picture}
        \end{minipage}}}

    \put(1,4.5){\circle{2}}
    \put(1,4.5){\makebox(0,0){\small convient}}
    \put(4,3){\circle{2}}
    \put(4,3){\makebox(0,0){\small bien}}

    \put(8.5,5.7){pour les diagrammes}

    \thicklines
    \put(8,1){\dashbox{0.2}(7,1.5){et autres figures simples.}}

    %% lignes
    \thinlines
    \put(1,7){\vector(0,-1){1.5}}

    \put(14,5.75){\circle*{0.1}}
    \put(14,5.75){\vector(-1,-1){3.25}}

    \thicklines
    \put(1,3.5){\line(0,-1){0.5}}
    \put(1,3){\vector(1,0){2}}

    \qbezier(4,2)(5.5,-0.5)(7,4.25)
    \qbezier(7,4.25)(8.5,9)(10,6.5)
    \put(10,6.5){\vector(2,-3){0.1}}
  \end{picture}
\end{center}

(Nous avons tracé la grille en filigrane dans la figure afin de
faciliter la comparaison entre le code et le résultat.)

Il existe quelques outils pour tracer des figures plus complexes
directement avec {\TeX}, dont PSTricks \citep{pstricks}
ou le système Ti\emph{k}Z/\textsc{pgf} \citep{tikz}.
Ce dernier gagne beaucoup en popularité depuis quelques années.


\subsection{Importation d'images}
\label{sec:tableaux:figures:graphics}

Il est aujourd'hui simple d'importer des images de source externes
dans un document {\LaTeX} en utilisant l'un ou l'autre des paquetages
\pkg{graphics} ou \pkg{graphicx} \citep{graphicx} en combinaison avec
un moteur {\TeX} moderne tel que pdf{\LaTeX} ou {\XeLaTeX}. Les
fonctionnalités des deux paquetages sont les mêmes, seules les
syntaxes des commandes diffèrent. Nous présenterons les commandes de
\pkg{graphicx}, plus modernes et conviviales.

La commande de base pour importer des images dans un document {\LaTeX} est
\begin{lstlisting}
\includegraphics`\oarg{options}\marg{fichier}'
\end{lstlisting}
où \meta{fichier} est le nom du fichier à importer. Il n'est pas
nécessaire de préciser l'extension dans le nom de fichier pour les
types d'images usuelles. Avec les moteurs pdf{\LaTeX} et {\XeLaTeX},
les types d'images automatiquement reconnus sont au moins PDF, JPEG et
EPS.

Les \meta{options} de \cmd{\includegraphics}, nombreuses, permettent
de redimensionner une image, de la faire pivoter ou encore de n'en
importer qu'une partie. L'exemple ci-dessous présente les principales
fonctionnalités; consulter la documentation %
(\fichier{grfguide.pdf} dans {\TeX}~Live ou
  \href{http://mirrors.ctan.org/macros/latex/required/graphics/grfguide.pdf}{%
    directement dans CTAN}) %
pour les détails et d'autres options.

\begin{exemple}
  Le fichier \fichier{ul\_p.pdf} contenant le logo de l'Université
  Laval en couleur et en format vectoriel est distribué avec la
  présente documentation ainsi qu'avec la classe \class{ulthese}. La
  simple commande
\begin{lstlisting}
\includegraphics{ul_p}
\end{lstlisting}
  insère le fichier en pleine grandeur dans le document:
  \begin{trivlist}
  \item \includegraphics{ul_p}
  \end{trivlist}

  On peut redimensionner l'image en valeur relative avec l'option
  \code{scale} ou en valeur absolue avec les options \code{width} ou
  \code{height}:
  \begin{trivlist}
  \item %
    \begin{minipage}[t]{0.55\linewidth}
\begin{lstlisting}
\includegraphics[scale=0.4]{ul_p}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.4\linewidth}
      \mbox{}\\ \includegraphics[scale=0.4]{ul_p}
    \end{minipage}
  \item %
    \begin{minipage}[t]{0.55\linewidth}
\begin{lstlisting}
\includegraphics[height=15mm]{ul_p}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.4\linewidth}
      \mbox{}\\ \includegraphics[height=15mm]{ul_p}
    \end{minipage}
  \end{trivlist}
  (Il est préférable d'utiliser une seule de \code{width} ou
  \code{height}. Autrement, ajouter l'option
  \verb|keepaspectratio=true| pour éviter de déformer l'image.)

  L'option \code{angle} permet de faire pivoter l'image dans le sens
  inverse des aiguilles d'une montre autour du coin inférieur gauche
  de l'image:
  \begin{trivlist}
  \item %
    \begin{minipage}[t]{0.7\linewidth}
\begin{lstlisting}
\includegraphics[angle=45,scale=0.25]{ul_p}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.25\linewidth}
      \mbox{}\\ \includegraphics[angle=45,scale=0.25]{ul_p}
    \end{minipage}
  \end{trivlist}

  Enfin, il y a diverses manières de sélectionner une partie seulement
  d'une image. L'option \code{bb} (pour \emph{Bounding Box}) prend
  quatre mesures en points PostScript (\code{bp}; $1~\text{bp} =
  1/72~\text{pouce}$) définissant le coin inférieur gauche et le coin
  supérieur droit de la zone à inclure:
  \begin{trivlist}
  \item %
    \begin{minipage}[t]{0.7\linewidth}
\begin{lstlisting}
\includegraphics[bb=0 0 102 129,clip=true,
  scale=0.4]{ul_p}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.25\linewidth}
      \mbox{}\\ \includegraphics[bb=0 0 102 129, clip=true, scale=0.4]{ul_p}
    \end{minipage}
  \end{trivlist}
  \qed
\end{exemple}

La commande \cmd{\includegraphics} permet d'appliquer certaines
 transformations aux images importées, mais celles-ci
peuvent également s'effectuer à l'aide de commandes externes
\emph{après} l'importation. L'avantage de ces commandes, c'est
qu'elles sont valides tout autant pour du texte que pour des images.

Le paquetage \pkg{graphicx} définit les commandes suivantes:
\begin{lstlisting}
\rotatebox`\oarg{options}\marg{angle}\marg{texte}'
\scalebox`\marg{échelle-h}\oarg{échelle-v}\marg{texte}'
\resizebox`\marg{dim-h}\marg{dim-v}\marg{texte}'
\reflectbox`\marg{texte}'
\end{lstlisting}
Dans tous les cas, \meta{texte} peut être du simple texte ou une boîte
quelconque, y compris le résultat de \cmd{\includegraphics}. Ainsi,
\begin{lstlisting}
\rotatebox{45}{\includegraphics{ul_p}}
\end{lstlisting}
et
\begin{lstlisting}
\includegraphics[angle=45]{ul_p}
\end{lstlisting}
donnent le même résultat.

Avec \cmd{\scalebox}, la mise à l'échelle \meta{échelle-h} s'applique
par défaut autant à l'horizontale qu'à la verticale. Autrement,
\meta{texte} est déformé.  Avec \cmd{\resizebox}, on peut spécifier
l'une de \meta{dim-h} ou \meta{dim-v} et \verb=!= pour l'autre valeur
pour éviter de déformer \meta{texte}.

\begin{exemple}
  Voici des exemples d'utilisation des commandes \cmd{\rotatebox},
  \cmd{\scalebox}, \cmd{\resizebox} et \cmd{\reflectbox} avec du texte:
  \begin{trivlist}
  \item %
    \begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\rotatebox{135}{texte}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}{0.35\linewidth}
      \rotatebox{135}{texte}
    \end{minipage}
  \item %
    \begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\scalebox{1.5}{texte}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}{0.35\linewidth}
      \scalebox{1.5}{texte}
    \end{minipage}
  \item %
    \begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\scalebox{1.5}[0.75]{texte}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}{0.35\linewidth}
      \scalebox{1.5}[0.75]{texte}
    \end{minipage}
  \item %
    \begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\resizebox{3cm}{!}{texte}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}{0.35\linewidth}
      \resizebox{3cm}{!}{texte}
    \end{minipage}
  \item %
    \begin{minipage}{0.55\linewidth}
\begin{lstlisting}
\reflectbox{texte}
\end{lstlisting}
    \end{minipage}
    \hfill
    \begin{minipage}{0.35\linewidth}
      \reflectbox{texte}
    \end{minipage}
  \end{trivlist}
  \qed
\end{exemple}



\subsection{Insertion de documents PDF}
\label{sec:tableaux:figures:pdfpages}

Il est parfois utile d'insérer dans un document {\LaTeX} une ou
plusieurs pages d'un autre document en format PDF, et ce, sans avoir à
se soucier des marges respectives des deux documents. Si l'on utilise
les moteurs pdf{\LaTeX} ou {\XeLaTeX}, le très pratique paquetage
\pkg{pdfpages} \citep{pdfpages} fournit la commande
\begin{lstlisting}
\includepdf`\oarg{options}\marg{fichier}'
\end{lstlisting}
Les \meta{options} sont trop nombreuses pour les présenter ici;
consulter la documentation (\fichier{pdfpages.pdf} dans {\TeX}~Live ou
  \href{http://mirrors.ctan.org/macros/latex/contrib/pdfpages/pdfpages.pdf}{%
    directement dans CTAN}).

\begin{exemple}
  Les couvertures avant et arrière du présent document ont été
  réalisées dans un logiciel spécialisé de création graphique,
  sauvegardées dans un fichier \fichier{couvertures.pdf}, puis mises
  en place dans le document avec
\begin{lstlisting}
\includepdf[pages=1]{couvertures}
\includepdf[pages=2]{couvertures}
\end{lstlisting}
  aux endroits appropriés.
  \qed
\end{exemple}



\section{Éléments flottants}
\label{sec:tableaux:floats}

Les tableaux et figures sont des éléments de contenu qui occupent
souvent beaucoup d'espace vertical dans la page. S'il ne reste plus
assez de place pour afficher un tel élément sur une page, {\TeX} devra
le déplacer au début de page suivante et cela risque de produire une
page inesthétique car insuffisamment remplie\footnote{%
  \emph{Underful \cs{vbox}} dans le jargon de {\TeX}.}. %

Pour éviter cela, il serait souhaitable que {\TeX} puisse insérer un
tableau à l'endroit indiqué dans le code source s'il y a suffisamment
d'espace sur la page pour l'accueillir


De plus, tout tableau et toute figure dans un document soigné devrait
comporter un titre/légende/description ainsi qu'un numéro afin de
pouvoir y faire référence dans le texte («comme l'illustre la
figure~3\dots»).

fonctionnalité très élaborée de LaTeX


éléments flottants
conseils de booktabs
tableaux
figures (insertion de graphiques (Sweave), mention de picture)

LATEX offre à ses valeureux utilisateurs la possibilité d'utiliser des environnements flottants. Ces environnements ont la particularité de rendre « flottants » leur contenu. C'est-à-dire que LATEX choisit à partir d'un algorithme qui tient compte d'un certain nombre de paramètres, la position de l'environnement dans le document.

%%% Local Variables:
%%% mode: latex
%%% TeX-engine: xetex
%%% TeX-master: "formation_latex-partie_2"
%%% coding: utf-8
%%% End:
